<script>
  async function send() {
    const text = document.getElementById("input").value;

    const res = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: text })
    });

    const output = document.getElementById("output");

    if (!res.ok) {
      const errorText = await res.text();
      output.textContent = "Server error:\n" + errorText;
      return;
    }

    const data = await res.json();
    output.textContent = data.reply;
  }
</script>
